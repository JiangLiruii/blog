---
layout:       post
title:        "Array 与 类Array"
subtitle:     "排排坐,吃果果,你一个,我一个"
date:         2018-06-23 12:00:00
author:       "Lorry"
header-mask:  0.3
header-img:   'http://p799phkik.bkt.clouddn.com/array.jpg'
catalog:      true
multilingual: false
tags:
    - JavaScript
---

# `Array` 是 `js` 的一个很重要也最常见的数据结构,但往往是经常在眼前的东西才会被忽视掉一些不为人知的细节,让我来跟你说说一些array中的神奇之处.

## length属性,该属性是`array`的内建属性,表示包含的列表元素的个数

```js
let a = [1,2,3,4]
console.log(a.length) // 4
a.length = 1  // 相当于a = a.slice(0,1)
console.log(a) // [1]
```
由上可以看出length属性是可以进行更改的(强烈建议不要这么做),相当于array.slice(0,x)

## index属性,可以对根据索引选择特定元素,但是如果修改超过了最大值的索引,会将其他超过部分填充为 `empty`

```js
let a = [1,2,3,4]
a[5] = 5
console.log(a) // [1,2,3,4,empty,5]
```

## 什么时候选择用`Array`构造器,而不用字面量[]?  当你需要创建一个指定长度的列表的时候

```js
let a = new Array(3)// [empty,empty,empty]
```

当然也可以利用index属性创建一个不存在的index,然后填充empty,但是这样更优雅,更干净.

## 4个插入删除操作 `push unshift pop shift`, pop和push比另外两个性能更好,因为不用更改其他元素的索引值.优先采用pop和push
```js
let a = [1,2,3,4]
let b = a.push([1,2,3,4]) // b = 5 返回的数组长度 a = [1,2,3,4,[1,2,3,4]]
let c = a.push(1,2,3,4) // c = 9 a = [1,2,3,4,[1,2,3,4],1,2,3,4]
let d = a.unshift(1) // d = 10 返回数组的长度 a = [1,1,2,3,4,[1,2,3,4],1,2,3,4]
let e = a.pop() // e = 4 返回删除的元素 a = [1,1,2,3,4,[1,2,3,4],1,2,3]
let f = a.shift() // f = 1 返回删除的元素 a = [1,2,3,4,[1,2,3,4],1,2,3]
```

## 在指定位置添加或删除 

- `delete`, 返回true/false 表示是否被删除,数组长度不会改变
- `splice(index, delete_amount, insert_content)`, 返回删除元素对应的数组,原数组改变

```js
let a = [1,2,3,4]
let b = delete a[0] // a = [empty, 2,3,4] b = true
let c = a.splice(0,1) // a = [2,3,4] c = [1]
let d = a.splice(0,0,1) // a = [1,2,3,4] d = []
```

# 常见操作

## Iterating (tranversing) 迭代, 对每个元素进行操作

```js
let a = [1,2,3,4]
for (let i = 0; i < a.length; i++) {
    console.log(a[i])
}

a.forEach((item) => {
    console.log(item)
})
```
## Mapping 遍历,其实跟迭代类似,会将原数组的每个元素按照map的进行更改(更高层的封装),

```js
let a = [
    {'name':'Lorry','gender':'male'},
    {'name':'Eric','gender':'male'},
    {'name':'Marry','gender':'female'},
    ]
// 取出所有的gender为一个列表,forEach
let gender = []
a.forEach(item => {
    gender.push(item.gender)
})
// 使用map
a.map(item => item.gender)

// 在不需要更改原数组的情况下使用forEach,否则可采用map,性能更好
```
## Testing `every` 和 `some`测试
```js
// 还是上一个的a列表
a.every(item => item.gender === 'male') // 判断是不是每一个的性别都是男,很明显Marry是妹子,所以返回false
a.some(item => item.gender === 'female') // 判断是不是某一个的性别为女,Marry就是,所以返回true
```
## Finding 寻找某个属性
```js
// 还是上一个a列表
const male = a.find(item => item.gender === 'male') // 把第一个汉子找出来,返回的是整个元素
console.log(male.name, male.gender) // Lorry, male

const maleAll = a.filter(item => item.gender === 'male') // 把所有的汉子都找出来
console.log(maleAll) //[{'name':'Lorry','gender':'male'},{'name':'Eric','gender':'male'}]

// 查找元素索引
a.indexOf({'name':'Marry','gender':'female'}) // -1 字典不可hash,都是唯一值,查到第一个
a.lastIndexOf()// 查找最后一个
a.findIndex(item => item.gender === 'male') // 0
```

## Sort 排序
```js
// 依然是那个a列表
a.sort((itemA,itemB) => {
    if(itemA.name > itemB.name) {
        return -1
    } else if (itemA.name < itemB.name) {
        return 1
    };
    return 0;
}) // 按照字母的升序排列 [{ name: "Marry", gender: "female" },{ name: "Lorry", gender: "male" },{ name: "Eric", gender: "male" }]
```
## Aggregating 聚合 reduce,第一个参数为聚合后的值,第二个为初始值
```js
let a = [1,2,3,4]
a.reduce((sum, num) => sum + num,0)
```
